var Player = require('./Player.js'),
    MAX_PLAYERS = 2;

function Game (id) {
  this.id = id;
  this.players = Object.create(null);
}

Game.prototype.join = function (socket) {
  var player = new Player(socket);
  if (!this.players[socket.id]) {
    this.players[socket.id] = player;
  }
};

Game.prototype.leave = function (socket) {

};

Game.prototype.broadcast = function (event, data, socket) {
  Object.keys(this.players).forEach(function (key) {
    var player = this.players[key];
    // If socket is specified, don't broadcast to this socket.
    if (socket && key === socket.id) {
      return;
    }

    player.socket.emit(event, data);
  });
};

Game.prototype.playerCount = function () {
  return Object.keys(this.players).length;
};

Game.prototype.isFull = function () {
  return this.playerCount() == MAX_PLAYERS;
}

module.exports = Game;
